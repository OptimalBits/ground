<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link rel="stylesheet" href="local/mocha.css" />
  <script src="local/expect.js"></script>
  <script src="local/mocha.js"></script>
  <script src="http://localhost:8080/socket.io/socket.io.js"></script>
  
  <script type="text/javascript">
    curl = {
           baseUrl: 'http://localhost:8080/',
           paths: {
//              'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min',
//              'underscore': 'https://raw.github.com/amdjs/underscore/master/underscore-min'
              'jquery': 'local/jquery-1.7.1',
              'underscore': 'local/underscore'
           },
           packages: {
             'ginger': {
                 path: '', // http://localhost:8080 (relative)
                 main: 'ginger',
                 lib: ''
             }
           }
       };
  </script>
  
  <script src="local/curl.js"></script>
  
  <script>
    mocha.setup('bdd')
  
    var socket = io.connect('http://localhost:8080');
    socket.once('connect', function(){
      //$(function () {
        curl(['test/test_cache'], function(){
          curl(['test/test_promises',
                'test/test_routes',
                'test/test_events',
                'test/test_declare',
                'test/test_base',
                'test/test_models',
                'test/test_collections',
                ], function(){
            // We need to run this first.
            mocha
                .run()
                .globals(['socket']) // acceptable globals
          });
        });
        //})
    });
  </script>
</head>
<body>
  <div id="mocha"></div>
</body>
</html>
