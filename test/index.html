<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link rel="stylesheet" href="https://raw.github.com/visionmedia/mocha/master/mocha.css" />
  <script src="https://raw.github.com/LearnBoost/expect.js/d2440da086bf8dc38c6085641f23b968a0f48b29/expect.js"></script>
  <script src="https://raw.github.com/visionmedia/mocha/master/mocha.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  
  <script type="text/javascript">
    curl = {
           baseUrl: '',
           paths: {
              'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min',
              'underscore': 'https://raw.github.com/amdjs/underscore/master/underscore-min'
           },
           packages: {
             'ginger': {
                 path: '', // http://localhost:8080 (relative)
                 main: 'ginger',
                 lib: ''
             }
           }
       };
  </script>
  
  <script src="https://raw.github.com/cujojs/curl/dev/dist/curl-kitchen-sink/curl.js"></script>
  
  <script>
    mocha.setup('bdd')
  
    var socket = io.connect(location.protocol+'//'+location.host);
    socket.once('connect', function(){
      //$(function () {
//        curl(['test/test_cache'], function(){
          curl([//'test/test_promises',
                'test/test_routes',
//                'test/test_events',
//                'test/test_declare',
                'test/test_base',
                'test/test_models',
                'test/test_collections',
                ], function(){
            // We need to run this first.
            mocha
                .run()
                .globals(['socket']) // acceptable globals
          });
//        });
        //})
    });
  </script>
</head>
<body>
  <div id="mocha"></div>
</body>
</html>
